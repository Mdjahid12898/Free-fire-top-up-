<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Payment - GM TopUp</title>

<style>
:root{--primary:#7b2ff7;--accent:#6a14f0;--muted:#eef2ff}
body{margin:0;font-family:Inter,Arial,sans-serif;background:var(--muted);color:#222}
.title{text-align:center;padding:26px 10px 6px;font-size:34px;color:var(--primary);font-weight:800}
.wrap{max-width:520px;margin:18px auto;padding:18px}
.card{background:#fff;border-radius:16px;padding:18px;box-shadow:0 8px 30px rgba(20,20,50,0.06)}
.product-img{width:180px;height:180px;object-fit:cover;border-radius:12px;margin:12px auto;display:block}
h2{text-align:center;margin:10px 0 4px}
.amount{color:var(--primary);font-size:28px;text-align:center;font-weight:800;margin:6px 0}
.uidline{text-align:center;color:#666;margin-bottom:12px}
.primary-btn{display:block;width:100%;background:#1679ff;color:#fff;padding:12px;border-radius:10px;margin-top:8px;font-weight:700}
.logos{display:flex;gap:12px;margin-top:16px}
.logo-box{flex:1;background:#fff;padding:12px;border-radius:12px;box-shadow:0 6px 16px rgba(15,15,40,0.05);display:flex;align-items:center;justify-content:center;cursor:pointer}
.logo-box img{max-width:120px}
.bottom-pay{position:fixed;left:0;right:0;bottom:0;padding:18px;background:#e6f0ff;border-radius:20px 20px 0 0;display:flex;justify-content:center}
.pay-btn{background:linear-gradient(180deg,#dff0ff,#cfe7ff);padding:14px 18px;border-radius:14px;font-size:20px;color:var(--primary);font-weight:800;width:min(640px,92%);text-align:center}
.modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center}
.modal{background:#fff;padding:16px;border-radius:12px;width:92%;max-width:420px}
.field{width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;margin-top:8px}
.verify-btn{width:100%;padding:12px;border:none;background:var(--accent);color:#fff;border-radius:10px;margin-top:12px;font-weight:700}
.small-muted{font-size:13px;color:#666;margin-top:8px}
</style>
</head>

<body>

<div class="title">Payment</div>

<div class="wrap">
<div class="card">
    <img id="productImg" class="product-img" src="" alt="">
    <h2 id="productName">GM TopUp</h2>
    <div id="amount" class="amount">‡ß≥ 0</div>
    <div class="uidline">UID: <span id="uidSpan">-</span></div>

    <button class="primary-btn">üì± ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï‡¶ø‡¶Ç</button>

    <div class="logos">
        <div class="logo-box" id="bkashBtn">
            <img src="https://i.ibb.co/DHcxsR5j/bkash.png">
        </div>
        <div class="logo-box" id="nagadBtn">
            <img src="https://i.ibb.co/39WQW9Nm/nagad.png">
        </div>
    </div>
</div>
</div>

<div class="bottom-pay">
    <div id="payNow" class="pay-btn">Pay 0 BDT</div>
</div>

<!-- MODAL -->
<div id="modal" class="modal-back">
<div class="modal">
    <h3 id="modalTitle">Payment</h3>

    <p>‡¶™‡ßç‡¶∞‡¶æ‡¶™‡¶ï ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞: <b id="receiverNumber">01765326575</b></p>

    <p class="small-muted">‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£: <b id="instrAmount">0</b> BDT</p>

    <label>Transaction ID:</label>
    <input id="txnInput" class="field" placeholder="TXN12345678">

    <button id="verifyBtn" class="verify-btn">VERIFY</button>
    <div id="verifyResult" class="small-muted"></div>
</div>
</div>

<script>
// URL params
const p = new URLSearchParams(location.search);
const amount = p.get("price") || '0';
const uid = p.get("uid") || '-';
const product = p.get("title") || "GM TopUp";

document.getElementById("amount").innerText = "‡ß≥ " + amount;
document.getElementById("payNow").innerText = "Pay " + amount + " BDT";
document.getElementById("uidSpan").innerText = uid;
document.getElementById("instrAmount").innerText = amount;
document.getElementById("productName").innerText = product;

// modal open
bkashBtn.onclick = () => openPay("bKash Payment");
nagadBtn.onclick = () => openPay("Nagad Payment");

function openPay(method){
    modalTitle.innerText = method;
    document.getElementById("modal").style.display="flex";
}

function closeModal(){ document.getElementById("modal").style.display="none"; }

// üì© SEND TO FORMSPREE (Gmail)
document.getElementById("verifyBtn").onclick = function(){
    const tx = document.getElementById("txnInput").value.trim();
    if(tx===""){ verifyResult.innerText="Transaction ID ‡¶¶‡¶ø‡¶®!"; verifyResult.style.color="red"; return; }

    verifyResult.innerText="Sending‚Ä¶";
    verifyResult.style.color="green";

    fetch("https://formspree.io/f/xwprgkyj", {
        method:"POST",
        headers:{ "Accept":"application/json" },
        body:JSON.stringify({
            product: product,
            amount: amount + " BDT",
            uid: uid,
            txnid: tx,
            method: modalTitle.innerText,
            time: new Date().toLocaleString()
        })
    })
    .then(()=>{ 
        closeModal();
        alert("Order Submitted! Check your Gmail."); 
    })
    .catch(()=> alert("Error! Try again."));
};
</script>

</body>
</html>
